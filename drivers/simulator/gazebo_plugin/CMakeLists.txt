cmake_minimum_required(VERSION 2.4.6)
include($ENV{ROS_ROOT}/core/rosbuild/rosbuild.cmake)
rospack(gazebo_plugin)
genmsg()
include_directories(msg/cpp)
gensrv()
include_directories(srv/cpp)

add_definitions(-fPIC)
set(ROS_BUILD_TYPE Release)

rospack_add_boost_directories()

rospack_add_library(ros_stereo_camera src/ros_stereo_camera.cpp)
rospack_link_boost(ros_stereo_camera thread)
rospack_add_library(ros_camera src/ros_camera.cpp)
rospack_link_boost(ros_camera thread)
rospack_add_library(ros_laser src/ros_laser.cpp)
rospack_link_boost(ros_laser thread)
rospack_add_library(ros_block_laser src/ros_block_laser.cpp)
rospack_link_boost(ros_block_laser thread)
rospack_add_library(ros_time src/ros_time.cpp)
rospack_link_boost(ros_time thread)
rospack_add_library(ros_ptz src/ros_ptz.cpp)
rospack_link_boost(ros_ptz thread)
rospack_add_library(ros_p3d src/ros_p3d.cpp)
rospack_link_boost(ros_p3d thread)
rospack_add_library(ros_f3d src/ros_f3d.cpp)
rospack_link_boost(ros_f3d thread)
rospack_add_library(gazebo_mechanism_control src/gazebo_mechanism_control.cpp)
rospack_link_boost(gazebo_mechanism_control thread)
rospack_add_library(gazebo_battery src/gazebo_battery.cpp)
rospack_link_boost(gazebo_battery thread)
rospack_add_library(ros_bumper src/ros_bumper.cpp)
rospack_link_boost(ros_bumper thread)

rospack_add_rostest(test/test_slide.xml)
rospack_add_rostest(test/test_base.xml)
rospack_add_rostest(test/test_arm.xml)
rospack_add_rostest(test/test_pendulum.xml)
rospack_add_rostest(test/test_scan.xml)

rospack_add_rostest(test/hztest_pr2.xml)
rospack_add_rostest(test/hztest_rostime.xml)
rospack_add_rostest(test/hztest_pr2_odom.xml)

# below need xvfb-run to test on build machine
rospack_add_rostest_graphical(test/test_camera.xml)
rospack_add_rostest_graphical(test/hztest_pr2_image.xml)

rospack_add_executable(urdf2factory src/urdf2factory.cpp)
